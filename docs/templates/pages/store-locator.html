<script type="text/javascript" lazy-script>
	window.apiKey = 'AIzaSyCT6lZ3i-iD7L4Y7jK244Fr1nJozTXR55M';
	window.BOMLabels = { store_locator_reach_store: "Raggiungi il punto vendita", More_info: "Leggi di pi√π", store_locator_approx: "Circa" };
	window.userCountry = "IT";

</script>


<div ng-controller="StoreLocatorCtrl as locator">
	<section class="section section--hero-store-locator section--negative" ng-show="!locator.position">
		<div class="background" ng-if="!root.webglEnabled" parallax>
			<img lazy data-src="img/store-locator/hero.jpg?width=1920&height=930&mode=crop" alt="title" />
		</div>
		<div class="background" ng-if="root.webglEnabled">
			<canvas glsl-canvas="img/store-locator/hero.jpg" class="glsl-canvas"></canvas>
		</div>
		<div class="aspect">
			<div class="container">
				<div class="row">
					<div class="col-md-12 offset-md-2">
						<div class="category">Store Locator</div>
						<div class="title"><b>We're near you.</b><br>Right here:</div>
						<form name="form" class="form" role="form" novalidate="" autocomplete="off" ng-submit="form.$valid && locator.onSubmit()" ng-keyup="$event.keyCode == 13 && form.$valid && locator.onSubmit()">
							<div class="group group--control">
								<input type="text" name="address" placeholder="Your address" required ng-model="locator.model.address" />
								<button type="submit" class="btn btn--secondary" ng-class="{ 'btn--busy': locator.busyFind }" ng-disabled="!locator.map || !form.$valid"><span>Find your nearest store</span></button>
							</div>
						</form>
						<div class="group group--error" ng-if="locator.error">
							<span>{{locator.error.message}}</span>
						</div>
						<div class="group group--cta">
							<button type="button" class="btn btn--position" ng-class="{ 'btn--busy': locator.busyLocation }" ng-click="locator.getGeolocation()" ng-disabled="!locator.map"><svg class="icon icon--pin"><use xlink:href="#pin"></use></svg> <span>Find my position</span></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<section class="section section--store-locator" ng-show="locator.position" ng-class="{ 'stores-hidden': locator.storesHidden }">
		<div class="section section--map">
			<div class="map" id="map"></div>
			<div class="group group--error" ng-if="locator.error">
				<span>{{locator.error.message}}</span>
			</div>
			<form name="form" class="form form--address" role="form" novalidate="" autocomplete="off" ng-submit="form.$valid && locator.onSubmit()" ng-keyup="$event.keyCode == 13 && form.$valid && locator.onSubmit()">
				<div class="container">
					<div class="row">
						<div class="col-md-12 offset-md-2">
							<div class="group group--control">
								<button type="button" class="btn btn--position" ng-class="{ 'btn--busy': locator.busyLocation }" ng-click="locator.getGeolocation()" ng-disabled="!locator.map"><svg class="icon icon--pin"><use xlink:href="#pin"></use></svg> <span>Find my position</span></button>
								<input type="text" name="address" placeholder="Your address" required ng-model="locator.model.address" />
								<button type="submit" class="btn btn--link" ng-class="{ 'btn--busy': locator.busyFind }" ng-disabled="!locator.map || !form.$valid"><span>Search</span></button>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
		<div class="section section--stores">
			<div class="group group--legend">
				<!-- <div class="category">Showroom with</div> -->
				<button type="button" class="btn btn--collapse hidden-sm-down" ng-click="locator.storesHidden = !locator.storesHidden">
					<svg class="icon icon--angle-left"><use xlink:href="#angle-left"></use></svg>
				</button>
				<div class="legend"><svg class="icon icon--atlas"><use xlink:href="#atlas"></use></svg> <span>200m<sup>2</sup> exposition area</span></div>
				<div class="legend"><svg class="icon icon--atlas icon--atlas--secondary"><use xlink:href="#atlas"></use></svg> <span>100m<sup>2</sup> exposition area</span></div>
			</div>
			<div class="listing listing--stores">
				<div class="listing__item" id="store-{{item.id_SF}}" ng-click="locator.panTo(item)" appear ng-repeat="item in locator.visibleStores">
					<div class="title"><span ng-bind="item.name"></span> <svg class="icon icon--atlas" ng-class="{ 'icon--atlas--secondary' : item.importante !== 1 }"><use xlink:href="#atlas"></use></svg></div>
					<div class="group group--info">
						<div class="address">
							{{item.address}}<br>
							{{item.zip}} {{item.city}} {{item.cod_provincia}} {{item.stato_IT}}<br>
							<span ng-if="item.tel">{{item.tel}}<br></span>
							<span ng-if="item.email"><a ng-href="mailto:{{item.email}}">{{item.email}}</a></span>
						</div>
						<div class="distance">At approx. <b>{{item.distance | number : 0}} km</b></div>
					</div>
					<div class="group group--cta">
						<a ng-href="{{item.webSite}}" target="_blank" class="btn btn--link" ng-if="item.webSite"><span>More info</span></a>
						<a ng-href="https://www.google.it/maps/dir/{{locator.position.lat()}},{{locator.position.lng()}}/{{item.name}}/@{{item.latitude}},{{item.longitude}}/" target="_blank" class="btn btn--link"><span>How to reach the store</span></a>
					</div>
				</div>
			</div>
		</div>
	</section>
</div>
<section class="section section--store-locator-info">
	<div class="container">
		<div class="row">
			<div class="col-md-10 offset-md-3" appear>
				<div class="title">A virtual space designed for dealers. The Retail Project.</div>
				<div class="abstract">Dealers who have created an elegant Atlas Concorde corner in their showrooms, presenting our main collections in an engaging way.</div>
				<div class="group group--cta">
					<a href="#" class="btn btn--link"><span>Discover more</span></a>
				</div>
			</div>
		</div>
	</div>
</section>
